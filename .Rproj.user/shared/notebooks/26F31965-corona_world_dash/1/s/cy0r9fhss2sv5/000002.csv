"0","countries <- c(""Italy"", ""Spain"", ""France"", ""Germany"", ""US"", ""Brazil"")"
"0",""
"0","ects <- 10**(cts) - 1"
"0","d0ts <- ects * apply(ects, 2, function(x) x >= 100)"
"0","ld0ts <- lapply(countries, function(n) as.vector(coredata(d0ts[,n])))"
"0","ld0ts <- lapply(ld0ts, function(x) x[x!=0])"
"0","names(ld0ts) <- countries"
"0",""
"0","N = max(vapply(ld0ts, length, numeric(1)))"
"0",""
"0","d0f <- rbind(as.data.frame(lapply(ld0ts, '[', 1)), as.data.frame(lapply(ld0ts, '[', 2)))"
"0","for (i in 3:N) {"
"0","   d0f <- rbind(d0f, as.data.frame(lapply(ld0ts, '[', i)))"
"0","}"
"0",""
"0","d0f <- cbind(1:N, d0f)"
"0","colnames(d0f) <- c('Days', countries)"
"0",""
"0","p <- plot_ly(d0f, x = ~Days)"
"0","for (country in countries) {"
"0","    p <- p %>% add_trace(data = d0f, y = as.formula(paste0(""~"", country)), name = country, type = 'scatter', mode = 'lines+markers')"
"0","}"
"0",""
"0","xax <- list("
"0","  title = 'Days from D0',"
"0","  titlefont = f1,"
"0","  showticklabels = TRUE"
"0",")"
"0",""
"0","yax <- list("
"0","  title = 'Confirmed cases',"
"0","  titlefont = f1,"
"0","  showticklabels = TRUE,"
"0","  type = ""log"""
"0",")"
"0",""
"0","p <- p %>% layout(xaxis = xax, yaxis = yax)"
"0",""
"0","#htmlwidgets::saveWidget(p, file = ""/home/henrique/Documents/Padulla/corona_dash/graph.html"")"
"0",""
"0","p"
